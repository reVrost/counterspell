syntax = "proto3";

package counterspell.v1;

import "google/protobuf/any.proto";
import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/revrost/counterspell/gen/counterspell/v1;counterspellv1";

// ---------- MODELS ----------
message Model {
  string provider = 1;
  string model = 2;
}

// ---------- TOOL PARAMS ----------
message ToolParam {
  string name = 1;
  string type = 2;
  bool required = 3;
  string description = 4;
  repeated string items = 5; // for array types
}

message Tool {
  string name = 1;
  string description = 2;
  map<string, ToolParam> params = 3;
}

message Toolset {
  string type = 1;
  string base_url = 2;
  repeated Tool tools = 3;
}

// ---------- SYNTHESIZER ----------
message Synthesizer {
  string model = 1;
  string description = 2;
  string prompt = 3;
}

// ---------- AGENT ----------
message Agent {
  string model = 1; // reference to model key
  string description = 2;
  string instruction = 3;
  repeated string sub_agents = 4; // references other agents
  repeated Toolset toolsets = 5;
  Synthesizer synthesizer = 6;
}

// ---------- ROOT CONFIG ----------
message Blueprint {
  string version = 1;
  map<string, Model> models = 2; // planning_model, thinking_model, etc.
  map<string, Agent> agents = 3; // planner, stock_pricer, etc.
}

service Service {
  // rpc CreateBlueprint(Blueprint) returns (Blueprint);
  // rpc GetBlueprint(Blueprint) returns (Blueprint);
  // rpc ListBlueprints(Blueprint) returns (Blueprint);
}
