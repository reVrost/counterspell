import{c as W,a as d,f as m}from"../chunks/DR9TkfTq.js";import{o as q,a as Z}from"../chunks/tPXKr78t.js";import{p as L,f as H,n as $,a as O,m as C,X as G,U as s,V as a,T as R,W as v,o as p,ay as ee,G as te,aH as ae}from"../chunks/BipdXalV.js";import{s as N}from"../chunks/DD1utUw7.js";import{i as k}from"../chunks/Do83GyS9.js";import{h as re}from"../chunks/c1eHLSmN.js";import{d as z}from"../chunks/Bw1CFWHr.js";import{I as se,s as E,c as ie,e as U}from"../chunks/Bn5TybZz.js";import{a as B,t as oe}from"../chunks/D-VKx0uZ.js";import{t as A,C as ne,c as ve,a as de}from"../chunks/Ot-C942e.js";import{s as le}from"../chunks/BznXBT2o.js";import{s as ce,r as fe}from"../chunks/DTnRGBIY.js";function X(D,e){L(e,!0);/**
 * @license @lucide/svelte v0.562.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let c=fe(e,["$$slots","$$events","$$legacy"]);const _=[["path",{d:"m9 18 6-6-6-6"}]];se(D,ce({name:"chevron-right"},()=>c,{get iconNode(){return _},children:(b,l)=>{var x=W(),h=H(x);le(h,()=>e.children??$),d(b,x)},$$slots:{default:!0}})),O()}var ue=m('<div class="flex justify-between items-center w-full"><div class="flex items-center gap-3"><div class="w-6 h-6 rounded-full bg-green-900/40 text-green-500 flex items-center justify-center text-xs shrink-0"><!></div> <div class="min-w-0"><div class="text-base text-gray-400 leading-snug line-clamp-2"> </div> <div class="text-xs text-gray-600 mt-0.5"> </div></div></div> <!></div>'),ge=m('<div class="flex items-center gap-2"><span class="text-xs text-orange-400 bg-orange-500/10 px-2.5 py-1 rounded-lg font-medium border border-orange-500/20">In Progress</span> <span class="text-xs text-orange-400/80 font-mono tabular-nums"> </span></div>'),me=m('<span class="text-xs text-blue-400 bg-blue-500/10 px-2.5 py-1 rounded-lg font-medium border border-blue-500/20">Review</span>'),xe=m('<div class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-600"><!></div>'),pe=m('<div class="flex justify-between items-start mb-2"><div class="flex items-center gap-2"><span><i></i></span> <span class="text-sm font-medium text-gray-400"> </span></div> <!></div> <p> </p> <!>',1),_e=m('<button type="button"><!></button>');function V(D,e){L(e,!0);let c=G(0);q(()=>{if(e.variant==="active"){A[e.task.id]||(A[e.task.id]=Date.now()),C(c,Math.floor((Date.now()-A[e.task.id])/1e3),!0);const f=setInterval(()=>{C(c,Math.floor((Date.now()-A[e.task.id])/1e3),!0)},1e3);return()=>clearInterval(f)}});function _(){B.openModal(e.task.id)}const b={active:"border-gray-800/50 active:scale-[0.98] active:bg-gray-800/50 focus:ring-purple-500/50",review:"border-gray-800 relative active:scale-[0.98] active:bg-gray-800/80 focus:ring-blue-500/50",completed:"bg-card/60 border-gray-800/20 flex-row active:scale-[0.98] active:bg-gray-800/50 focus:ring-green-500/50"};var l=_e();l.__click=_;var x=s(l);{var h=f=>{var y=ue(),r=s(y),t=s(r),i=s(t);ne(i,{class:"w-3 h-3"}),a(t);var u=v(t,2),o=s(u),n=s(o,!0);a(o);var j=v(o,2),F=s(j,!0);a(j),a(u),a(r);var I=v(r,2);X(I,{class:"w-4 h-4 text-gray-700 ml-3 shrink-0"}),a(y),R(()=>{N(n,e.task.description),N(F,e.project.name)}),d(f,y)},P=f=>{var y=pe(),r=H(y),t=s(r),i=s(t),u=s(i);a(i);var o=v(i,2),n=s(o,!0);a(o),a(t);var j=v(t,2);{var F=g=>{var w=ge(),T=v(s(w),2),Y=s(T);a(T),a(w),R(()=>N(Y,`${p(c)??""}s`)),d(g,w)},I=g=>{var w=me();d(g,w)};k(j,g=>{e.variant==="active"?g(F):g(I,!1)})}a(r);var M=v(r,2);let S;var J=s(M,!0);a(M);var K=v(M,2);{var Q=g=>{var w=xe(),T=s(w);X(T,{class:"w-4 h-4"}),a(w),d(g,w)};k(K,g=>{e.variant==="review"&&g(Q)})}R(g=>{E(i,1,g),E(u,1,`fas ${e.project.icon??""}`),N(n,e.project.name),S=E(M,1,"text-base text-gray-200 font-medium leading-snug line-clamp-2",null,S,{"pr-6":e.variant==="review"}),N(J,e.task.description)},[()=>ie(ve(e.project.color,"opacity-80 w-6 h-6 rounded-lg flex items-center justify-center text-xs",e.variant==="review"&&"bg-gray-800/50 border border-gray-700/50"))]),d(f,y)};k(x,f=>{e.variant==="completed"?f(h):f(P,!1)})}a(l),R(()=>E(l,1,`w-full text-left bg-card border rounded-2xl p-4 transition-all duration-150 shadow-sm focus:outline-none focus:ring-2 ${b[e.variant]??""}`)),d(D,l),O()}z(["click"]);var be=m('<div class="mb-6"><h3 class="px-2 text-xs font-bold text-gray-500 uppercase tracking-wider mb-3">Needs Review</h3> <div class="space-y-3"></div></div>'),ye=m('<div class="px-2 py-2 text-sm text-gray-600 text-center">No active agents running</div>'),he=m('<div class="pt-4 border-t border-gray-800/50"><h3 class="px-2 text-xs font-bold text-gray-600 uppercase tracking-wider mb-3">Completed</h3> <div class="space-y-3"></div></div>'),we=m('<div id="feed-content"><!> <div class="mb-6"><h3 class="px-2 text-xs font-bold text-gray-500 uppercase tracking-wider mb-3">In Progress</h3> <div class="space-y-3"><!> <!></div></div> <!></div>');function je(D,e){L(e,!0);var c=we(),_=s(c);{var b=t=>{var i=be(),u=v(s(i),2);U(u,21,()=>e.feedData.reviews,o=>o.id,(o,n)=>{V(o,{get task(){return p(n)},get project(){return e.feedData.projects[p(n).projectId]},variant:"review"})}),a(u),a(i),d(t,i)};k(_,t=>{e.feedData.reviews.length>0&&t(b)})}var l=v(_,2),x=v(s(l),2),h=s(x);U(h,17,()=>e.feedData.active,t=>t.id,(t,i)=>{V(t,{get task(){return p(i)},get project(){return e.feedData.projects[p(i).projectId]},variant:"active"})});var P=v(h,2);{var f=t=>{var i=ye();d(t,i)};k(P,t=>{e.feedData.active.length===0&&t(f)})}a(x),a(l);var y=v(l,2);{var r=t=>{var i=he(),u=v(s(i),2);U(u,21,()=>e.feedData.done,o=>o.id,(o,n)=>{V(o,{get task(){return p(n)},get project(){return e.feedData.projects[p(n).projectId]},variant:"completed"})}),a(u),a(i),d(t,i)};k(y,t=>{e.feedData.done.length>0&&t(r)})}a(c),d(D,c),O()}var ke=m('<div class="flex items-center justify-center h-64"><div class="flex flex-col items-center gap-3"><div class="w-8 h-8 rounded-lg bg-violet-500/10 border border-violet-500/20 flex items-center justify-center"><i class="fas fa-spinner fa-spin text-sm text-violet-400"></i></div> <p class="text-xs text-gray-500">Loading feed...</p></div></div>'),De=m('<div class="flex items-center justify-center h-64"><div class="text-center"><p class="text-sm text-red-400 mb-2"> </p> <button class="px-4 py-2 bg-violet-500/20 border border-violet-500/30 rounded-lg text-xs text-violet-300 hover:bg-violet-500/30 transition-colors">Retry</button></div></div>');function He(D,e){L(e,!0);let c=G(ee({active:[],reviews:[],done:[],todo:[],projects:{}})),_=G(!0),b=G(null),l=null;async function x(){try{C(_,!0),C(b,null);const r=await oe.getFeed();C(c,r,!0),B.projects=Object.values(r.projects||{})}catch(r){C(b,r instanceof Error?r.message:"Failed to load feed",!0),console.error("Feed load error:",r)}finally{C(_,!1)}}q(async()=>{await x(),l=de(()=>{x()})}),Z(()=>{l&&l.close()});var h=W();re("x1i5gj",r=>{te(()=>{ae.title="Dashboard | Counterspell"})});var P=H(h);{var f=r=>{var t=ke();d(r,t)},y=r=>{var t=W(),i=H(t);{var u=n=>{var j=De(),F=s(j),I=s(F),M=s(I,!0);a(I);var S=v(I,2);S.__click=x,a(F),a(j),R(()=>N(M,p(b))),d(n,j)},o=n=>{je(n,{get feedData(){return p(c)}})};k(i,n=>{p(b)?n(u):n(o,!1)},!0)}d(r,t)};k(P,r=>{p(_)?r(f):r(y,!1)})}d(D,h),O()}z(["click"]);export{He as component};
