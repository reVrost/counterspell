import"../chunks/CN-VqVl8.js";import{f as c,a as n,c as K,w as N}from"../chunks/DR9TkfTq.js";import{o as V}from"../chunks/tPXKr78t.js";import{p as Y,a as q,W as p,U as a,m as i,X as g,f as C,o as h,V as r,Y as b,T as J}from"../chunks/BipdXalV.js";import{s as Q}from"../chunks/DD1utUw7.js";import{i as x}from"../chunks/Do83GyS9.js";import{h as Z}from"../chunks/c1eHLSmN.js";import{d as ee}from"../chunks/Bw1CFWHr.js";import{b as U}from"../chunks/D-VKx0uZ.js";import{G as E}from"../chunks/Dm_xWJ-l.js";import{X as te}from"../chunks/i3ajiGCp.js";function oe(){}const _e=Object.freeze(Object.defineProperty({__proto__:null,load:oe},Symbol.toStringTag,{value:"Module"}));var ae=N(c(`<script>
			// Global reset function
			// window.forceReset = async () => {
			// 	console.log('ðŸ”„ Global force reset...');
			// 	localStorage.clear();
			// 	sessionStorage.clear();
			//
			// 	// Clear all cookies
			// 	document.cookie.split(';').forEach((c) => {
			// 		const domain = window.location.hostname;
			// 		const domains = [domain, \`.\${domain}\`, 'localhost'];
			// 		domains.forEach((d) => {
			// 			document.cookie = c
			// 				.replace(/^ +/, '')
			// 				.replace(/=.*/, \`=;expires=\${new Date(0).toUTCString()};path=/;domain=\${d}\`);
			// 			document.cookie = c
			// 				.replace(/^ +/, '')
			// 				.replace(/=.*/, \`=;expires=\${new Date(0).toUTCString()};path=/;\`);
			// 		});
			// 	});
			//
			// 	console.log('âœ… Reset complete, reloading...');
			// 	setTimeout(() => window.location.reload(), 500);
			// };
		<\/script><!>`,1)),re=c('<div class="fixed top-4 left-1/2 -translate-x-1/2 z-[200] bg-red-500/90 backdrop-blur text-white px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 animate-in fade-in slide-in-from-top-4 duration-300"><!> <span class="text-sm font-medium"> </span></div>'),se=c('<div class="space-y-4"><div class="w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto"></div> <p class="text-gray-400">Checking authentication...</p></div>'),ie=c('<div><button class="w-full bg-white text-black font-bold h-12 rounded-lg hover:bg-gray-200 transition active:scale-95 flex items-center justify-center gap-2"><!> Continue with GitHub</button> <p class="mt-4 text-[10px] text-gray-600">By continuing, you agree to Developer Protocol v2.1</p></div>'),ne=c('<div class="space-y-4"><div class="bg-gray-900/50 rounded-xl p-4 border border-gray-800 text-left space-y-3 font-mono text-xs"><div class="flex items-center gap-3"><div class="w-4 h-4 rounded-full flex items-center justify-center bg-purple-500/20 text-purple-400"><i class="fas fa-circle-notch fa-spin"></i></div> <span class="text-gray-200">Redirecting to GitHub...</span></div></div></div>'),le=c('<div class="space-y-4"><div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mx-auto flex items-center justify-center shadow-lg shadow-blue-500/20 mb-6"><!></div> <h1 class="text-3xl font-bold text-white tracking-tight">Welcome to Counterspell</h1> <p class="text-gray-400 text-sm leading-relaxed">Mobile-first, hosted AI agent Kanban. <br/> Orchestrate from your pocket.</p></div> <!>',1),ce=c('<div class="h-screen flex flex-col overflow-hidden bg-[#0C0E12]"><div class="absolute inset-0 overflow-hidden pointer-events-none"><div class="absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-[100px] animate-pulse"></div> <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-[100px] animate-pulse" style="animation-delay: 2s;"></div></div> <!> <div class="fixed inset-0 z-[100] bg-[#0C0E12] flex flex-col items-center justify-center text-center px-6"><div class="relative z-10 max-w-md w-full space-y-8"><!></div> <div class="absolute bottom-8 text-center space-y-2"><p class="text-xs text-gray-600"><a href="https://github.com/revrost/counterspell" target="_blank" class="hover:text-gray-400 transition"><!> Open Source</a></p></div></div></div>');function ye($,H){Y(H,!0);let w=g(!1),f=g(""),u=g(!1),_=g(!0);async function L(){i(w,!0),i(u,!1);try{await U.loginWithGitHub()}catch(e){console.error("Login failed:",e),i(w,!1),i(f,"Failed to initiate GitHub login"),i(u,!0)}}async function P(){document.cookie.split(";").forEach(e=>{const t=window.location.hostname;[t,`.${t}`,"localhost"].forEach(o=>{document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date(0).toUTCString()};path=/;domain=${o}`),document.cookie=e.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date(0).toUTCString()};path=/;`)})}),console.log("âœ… All cookies cleared")}function R(){i(u,!1),i(f,"")}V(async()=>{console.log("ðŸ“ Landing page mounted, checking auth...");const e=new URLSearchParams(window.location.search),t=e.get("error"),s=e.get("error_description");if(t){i(f,s||`Login error: ${t}`,!0),i(u,!0),window.history.replaceState({},"","/"),i(_,!1);return}try{const o=await U.checkSession();console.log("âœ… Auth check result:",o),o.authenticated?(console.log("ðŸš€ Redirecting to dashboard..."),window.location.href="/dashboard"):console.log("â“ Not authenticated, staying on landing page")}catch(o){console.log("âŒ Auth check failed:",o),o instanceof Error&&o.message.includes("401")&&(console.log("âš ï¸ Token expired, clearing cookies..."),await P())}finally{i(_,!1)}});var y=ce();Z("1uha8ag",e=>{var t=K(),s=C(t);{var o=l=>{var m=ae();p(C(m)),n(l,m)};x(s,l=>{l(o)})}n(e,t)});var G=p(a(y),2);{var z=e=>{var t=re(),s=a(t);te(s,{class:"w-4 h-4 cursor-pointer hover:opacity-80",onclick:R});var o=p(s,2),l=a(o,!0);r(o),r(t),J(()=>Q(l,h(f))),n(e,t)};x(G,e=>{h(u)&&e(z)})}var T=p(G,2),k=a(T),M=a(k);{var O=e=>{var t=se();n(e,t)},W=e=>{var t=le(),s=C(t),o=a(s),l=a(o);E(l,{class:"w-8 h-8 text-white"}),r(o),b(4),r(s);var m=p(s,2);{var X=d=>{var v=ie(),S=a(v);S.__click=L;var F=a(S);E(F,{class:"w-5 h-5"}),b(),r(S),b(2),r(v),n(d,v)},B=d=>{var v=ne();n(d,v)};x(m,d=>{h(w)?d(B,!1):d(X)})}n(e,t)};x(M,e=>{h(_)?e(O):e(W,!1)})}r(k);var A=p(k,2),j=a(A),D=a(j),I=a(D);E(I,{class:"w-3 h-3 inline mr-1"}),b(),r(D),r(j),r(A),r(T),r(y),n($,y),q()}ee(["click"]);export{ye as component,_e as universal};
