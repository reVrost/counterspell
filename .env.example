# =============================================================================
# Counterspell Environment Configuration
# =============================================================================

# =============================================================================
# Database (Required)
# =============================================================================

# PostgreSQL connection string
# For local development with Docker:
#   docker run -d -p 5432:5432 -e POSTGRES_DB=counterspell -e POSTGRES_PASSWORD=dev postgres:16
DATABASE_URL=postgres://postgres:dev@localhost:5432/counterspell?sslmode=disable

# =============================================================================
# GitHub OAuth (Required for repo access)
# =============================================================================
# Get these from: https://github.com/settings/developers

# Your GitHub OAuth App Client ID
GITHUB_CLIENT_ID=your_github_client_id_here

# Your GitHub OAuth App Client Secret
GITHUB_CLIENT_SECRET=your_github_client_secret_here

# The callback URL registered with GitHub OAuth App
GITHUB_REDIRECT_URI=http://localhost:8710/github/callback

# =============================================================================
# Supabase Auth (Optional - for multi-user mode)
# =============================================================================
# Leave these empty for single-user mode (all requests use "default" user)
# Get these from: https://supabase.com/dashboard

# SUPABASE_URL=https://xxx.supabase.co
# SUPABASE_ANON_KEY=eyJ...
# SUPABASE_JWT_SECRET=your-jwt-secret

# =============================================================================
# Worker Pool Configuration
# =============================================================================

# Number of concurrent workers in the global pool (default: 20)
WORKER_POOL_SIZE=20

# Maximum concurrent tasks per user (default: 5)
MAX_TASKS_PER_USER=5

# =============================================================================
# Sandbox Configuration
# =============================================================================

# Timeout for sandboxed command execution (default: 10m)
SANDBOX_TIMEOUT=10m

# Maximum output size in bytes (default: 1048576 = 1MB)
SANDBOX_OUTPUT_LIMIT=1048576

# Commands allowed to run without sandbox for backend_native
# (comma-separated)
NATIVE_ALLOWLIST=git,ls,cat,head,tail,grep,find,wc,sort,uniq

# =============================================================================
# Data Directory
# =============================================================================

# Base directory for runtime data (repos, worktrees)
DATA_DIR=./data

# =============================================================================
# Optional
# =============================================================================

# LOG_LEVEL=debug
# PUBLIC_URL=https://app.example.com
