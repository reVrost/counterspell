# =============================================================================
# Counterspell Environment Configuration
# =============================================================================

# =============================================================================
# Database (Required)
# =============================================================================

# SQLite database path (local-first)
DATABASE_PATH=./data/counterspell.db

# =============================================================================
# GitHub OAuth (Required for repo access)
# =============================================================================
# Get these from: https://github.com/settings/developers

# Your GitHub OAuth App Client ID
GITHUB_CLIENT_ID=your_github_client_id_here

# Your GitHub OAuth App Client Secret
GITHUB_CLIENT_SECRET=your_github_client_secret_here

# The callback URL registered with GitHub OAuth App
GITHUB_REDIRECT_URI=http://localhost:8710/github/callback

# =============================================================================
# Control Plane (Required for tunneling and multi-user features)
# =============================================================================
# The control plane handles auth, subdomain assignment, and tunnel routing.
# This is the hosted service at counterspell.io
# Leave empty for offline mode (no tunneling, no auth)

# Control plane API URL (use https://api.counterspell.io in production)
CONTROL_PLANE_URL=http://localhost:3001

# Pre-configured auth token (optional - if set, skip interactive auth)
# Leave empty to trigger interactive auth flow on first run
AUTH_TOKEN=

# =============================================================================
# Worker Pool Configuration
# =============================================================================

# Number of concurrent workers in the global pool (default: 20)
WORKER_POOL_SIZE=20

# Maximum concurrent tasks per user (default: 5)
MAX_TASKS_PER_USER=5

# =============================================================================
# Sandbox Configuration
# =============================================================================

# Timeout for sandboxed command execution (default: 10m)
SANDBOX_TIMEOUT=10m

# Maximum output size in bytes (default: 1048576 = 1MB)
SANDBOX_OUTPUT_LIMIT=1048576

# Commands allowed to run without sandbox for backend_native
# (comma-separated)
NATIVE_ALLOWLIST=git,ls,cat,head,tail,grep,find,wc,sort,uniq

# =============================================================================
# Data Directory
# =============================================================================

# Base directory for runtime data (repos, worktrees)
DATA_DIR=./data

# =============================================================================
# Optional
# =============================================================================

# LOG_LEVEL=debug

# Production base URL (used for OAuth redirects)
# PUBLIC_URL=https://counterspell.io

# Development frontend URL (for when Vite dev server is on different port)
# Set this when running `npm run dev` on port 5173 while Go is on 8710
# FRONTEND_URL=http://localhost:5173
