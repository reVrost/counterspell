// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.27.0
// source: settings.sql

package sqlc

import (
	"context"
	"database/sql"
)

const getUserSettings = `-- name: GetUserSettings :one
SELECT user_id, openrouter_key, zai_key, anthropic_key, openai_key, 
       COALESCE(agent_backend, 'native') as agent_backend, updated_at 
FROM user_settings WHERE user_id = 'default'
`

type GetUserSettingsRow struct {
	UserID        string         `json:"user_id"`
	OpenrouterKey sql.NullString `json:"openrouter_key"`
	ZaiKey        sql.NullString `json:"zai_key"`
	AnthropicKey  sql.NullString `json:"anthropic_key"`
	OpenaiKey     sql.NullString `json:"openai_key"`
	AgentBackend  string         `json:"agent_backend"`
	UpdatedAt     sql.NullTime   `json:"updated_at"`
}

func (q *Queries) GetUserSettings(ctx context.Context) (GetUserSettingsRow, error) {
	row := q.db.QueryRowContext(ctx, getUserSettings)
	var i GetUserSettingsRow
	err := row.Scan(
		&i.UserID,
		&i.OpenrouterKey,
		&i.ZaiKey,
		&i.AnthropicKey,
		&i.OpenaiKey,
		&i.AgentBackend,
		&i.UpdatedAt,
	)
	return i, err
}

const upsertUserSettings = `-- name: UpsertUserSettings :exec
INSERT INTO user_settings (user_id, openrouter_key, zai_key, anthropic_key, openai_key, agent_backend, updated_at)
VALUES ('default', ?, ?, ?, ?, ?, ?)
ON CONFLICT(user_id) DO UPDATE SET
openrouter_key = excluded.openrouter_key,
zai_key = excluded.zai_key,
anthropic_key = excluded.anthropic_key,
openai_key = excluded.openai_key,
agent_backend = excluded.agent_backend,
updated_at = excluded.updated_at
`

type UpsertUserSettingsParams struct {
	OpenrouterKey sql.NullString `json:"openrouter_key"`
	ZaiKey        sql.NullString `json:"zai_key"`
	AnthropicKey  sql.NullString `json:"anthropic_key"`
	OpenaiKey     sql.NullString `json:"openai_key"`
	AgentBackend  sql.NullString `json:"agent_backend"`
	UpdatedAt     sql.NullTime   `json:"updated_at"`
}

func (q *Queries) UpsertUserSettings(ctx context.Context, arg UpsertUserSettingsParams) error {
	_, err := q.db.ExecContext(ctx, upsertUserSettings,
		arg.OpenrouterKey,
		arg.ZaiKey,
		arg.AnthropicKey,
		arg.OpenaiKey,
		arg.AgentBackend,
		arg.UpdatedAt,
	)
	return err
}
